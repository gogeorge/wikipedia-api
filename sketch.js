var searchUrl = 'https://en.wikipedia.org/w/api.php?action=opensearch&format=json&search=';
let contentUrl = 'https://en.wikipedia.org/w/api.php?action=query&prop=revisions&rvprop=content&format=json&titles=';

// pilot sample:
//var celebrities = "Adam Levine Alexander Skarsgard Ali Larter Alicia Keys Amanda Bynes Amanda Seyfried America Ferrera Amy Adams Amy Winehouse Andrew Garfield Angelina Jolie Anna Paquin Anne Hathaway Ashlee Simpson Ashley Greene Ashley Olsen Ashley Tisdale Ashton Kutcher Audrina Patridge Avril Lavigne Ben Affleck Bethenny Frankel Beyoncé Knowles Blake Lively Blake Shelton Brad Paisley Brad Pitt Bradley Cooper Britney Spears Brody Jenner Brooke Shields Bruce Willis Céline Dion Cameron Diaz Carmen Electra Carrie Underwood Cate Blanchett Catherine Zeta-Jones Chace Crawford Channing Tatum Charlie Sheen Charlize Theron Cheryl Burke Chris Brown Chris Hemsworth Chris Pine Christian Bale Christina Aguilera Christina Applegate Claire Danes Clay Aiken Colin Farrell Colin Firth Corbin Bleu Cory Monteith Courteney Cox Dakota Fanning Daniel Craig Daniel Radcliffe David Archuleta David Beckham David Cook Demi Lovato Demi Moore Denise Richards Denzel Washington Sean Combs Drew Barrymore Ed Westwick Elin Nordegren Elisabeth Hasselbeck Ellen DeGeneres Ellen Pompeo Emily Blunt Emma Roberts Emma Stone Emma Watson Eva Longoria Eva Mendes Evangeline Lilly Faith Hill George Clooney Gerard Butler Gisele Bündchen Gwen Stefani Gwyneth Paltrow Halle Berry Hayden Panettiere Heath Ledger Heather Locklear Heidi Klum Heidi Montag Hilary Duff Hugh Jackman Isla Fisher Jake Gyllenhaal James Franco Janet Jackson January Jones Jennifer Aniston Jennifer Garner Jennifer Hudson Jennifer Lawrence Jennifer Lopez Jenny McCarthy Jessica Alba Jessica Biel Jessica Chastain Jessica Simpson Jessica Szohr Joe Jonas Joel Madden John Krasinski John Mayer Johnny Depp Jon Hamm Jonas Brothers Jordin Sparks Josh Duhamel Josh Hartnett Josh Hutcherson Jude Law Julia Louis-Dreyfus Julia Roberts Julianne Hough Justin Bieber Justin Timberlake Kanye West Kate Beckinsale Kate Bosworth Kate Gosselin Kate Hudson Princess Kate Kate Moss Kate Walsh Kate Winslet Katharine McPhee Katherine Heigl Katie Holmes Katy Perry Keanu Reeves Keira Knightley Keith Urban Kellan Lutz Kellie Pickler Kelly Clarkson Kelly Ripa Kendra Wilkinson Kenny Chesney Keri Russell Kerry Washington Kevin Federline Khloé Kardashian Kim Kardashian Kirsten Dunst Kirstie Alley Kourtney Kardashian Kris Allen Kristen Bell Kristen Stewart Kristin Cavallari Lady Gaga Lauren Conrad Lea Michele LeAnn Rimes Leighton Meester Leonardo DiCaprio Liam Hemsworth Lindsay Lohan Liv Tyler Lucy Liu Madonna Maggie Gyllenhaal Mandy Moore Mariah Carey Mario Lopez Mark Ballas Mark Wahlberg Mary-Kate Olsen Matt Damon Matthew McConaughey Megan Fox Michelle Obama Michelle Williams Mila Kunis Miley Cyrus Milo Ventimiglia Miranda Kerr Miranda Lambert Mischa Barton Naomi Campbell Naomi Watts Natalie Portman Nick Lachey Nicole Kidman Nicole Richie Olivia Wilde Oprah Winfrey Orlando Bloom Owen Wilson Pamela Anderson Paris Hilton Patrick Dempsey Paula Abdul Penélope Cruz Penn Badgley Pete Wentz Pippa Middleton Prince Harry Prince William Queen Latifah Rachael Ray Rachel Bilson Rachel McAdams Rebecca Romijn Reese Witherspoon Renée Zellweger Rihanna Robert Pattinson Rooney Mara Rosario Dawson Rosie O’Donnell Rumer Willis Ryan Gosling Ryan Phillippe Ryan Reynolds Ryan Seacrest Salma Hayek Sandra Bullock Sandra Oh Scarlett Johansson Selena Gomez Shakira Shania Twain Sheryl Crow Shia LaBeouf Sienna Miller Simon Cowell Sofia Vergara Taylor Hicks Taylor Lautner Taylor Momsen Taylor Swift Teri Hatcher Tiger Woods Tim McGraw Tina Fey Tom Brady Tom Cruise Tori Spelling Tyra Banks Vanessa Hudgens Vanessa Minnillo Vanessa Williams Victoria Beckham Vince Vaughn Whitney Port Will Smith Winona Ryder Zac Efron Zoë Saldana"

// final sample:
var celebrities = "A$AP Rocky Abby Lee Miller Adam Lind Adrienne Bailon Alexa Curtin Alexa Maetta Alexandra Shipp Alex Roldan Alice Eve Alicia Cargile Amal Clooney Amanda Bynes Amanda Markert Amber Heard Amber Portwood Amber Rose Andrea Bocelli Andre Leon Talley Andrew Garfield Andy Cohen Angel Haze Angelina Jolie Angella Ebagua Angie Artiaga Anna Faris Anna Wintour Anne Hathaway Annie Leibovitz Apollo Nida April Stotts Ariana Grande Ariel Winter Armie Hammer Ashlee Simpson Ashley Salazar Ashton Kutcher Aubrey O’Day Audrina Patridge Ava London Aviva Drescher Avril Lavigne Barack Obama Barbara Walters Bella Thorne Ben Affleck Benedict Cumberbatch Ben Flajnik Benji Madden Ben Stiller Benzino Bethenny Frankel Beyonce Big Sean Bill Cosby Blac Chyna Blake Lively Bobby Heyward Bradley Cooper Brad Pitt Brandi Glanville Brandon Davis Brandon Jenner Brendan Fitzpatrick Briana Dejesus Brian Hallisay Brie Bythewood Brielle Zolciak Bristol Palin Britney Spears Brittany Kerr Brittany Musick Brody Jenner Brooke Wehr Caitlyn Jenner Caleb Reynolds Calvin Harris Cameron Diaz Cam Gigandet Cara Delevingne Carl Crawford Carley Hawkins Carlton Gebbia Carole Radziwill Casper Smart Catelynn Lowell Chantelle Fraser Charice Pempengco Charlie Ebersol Charlie Hunnam Charlie Sheen Charli XCX Charlize Theron Chelsea Brookshire Chelsea Handler Chelsea Houska Chelsea Kane Cheryl Cole Chloe Green Chris Buckner Chris Evans Chris Martin Chris Noth Chris Pratt Christina Aguilera Cicely Evans Claudia Jordan Cole DeBoer Corey Gamble Corey Simms Courtney Robertson Courtney Stodden Cristianna Cardinale Cynthia Bailey Daisy Lewellyn Dakota Johnson Dakota Meyer Danielle Cunningham Danielle Staub David Bowie David Eason David Krause David Lucado DawnCheré Wilkerson Dax Shepard Dean McDermott Dean Sheremet Debra Danielsen Deena Cortese Demi Moore Dhar Mann Diana Ross Dominic Purcell Donald Trump Dorothy Wang Doug Hutchison Draya Michele Drew Chadwick Eddie Cibrian EJ Johnson Elizabeth Chambers Ellen DeGeneres Elliott Spencer Emma Roberts Emma Stone Emma Watson Erica Mena Eric Johnson Eric Wilkinson Eva Marcille Eva Mendes Evan Peters Evan Ross Evelyn Lozada Farrah Abraham Farrah Franklin Fern Mallis FKA Twigs Frankie Grande French Montana Gabourey Sidibe Gary Shirley Gavin Rossdale George Clooney Gia Giudice Giuliana Rancic Gordon Ramsay Grace Coddington Graham Norton Gwen Stefani Gwyneth Paltrow Hailey Baldwin Halle Berry Hank Baskett Harry Styles Hayden Panettiere Heather Thomson Hefe Wine Heidi Montag Henry Cavill Hilary Duff Hulk Hogan Ian Somerhalder Ian Ziering Ice T Iggy Azalea Ireland Baldwin Isaac Calpito Jackie Christie Jackie Siegel Jack Osbourne Jacqueline Conroy Jaden Smith Jake Gyllenhaal Jameelah Artiaga James Franco James Freeman James Packer Jamie Dornan Jamie Foxx Jamie Sangouthai Jamie Spears Jason Aldean Jason Hoppy Javi Marroquin Jay Z Jean Bernard Fernandez Versini Jeff Schroeder Jenelle Evans Jenna Jameson Jennette McCurdy Jennifer Aniston Jennifer Garner Jennifer Lawrence Jennifer Lopez Jenny McCarthy Jeremy Calvert Jeremy Clarkson Jeremy Meeks Jeremy Renner Jessica Alba Jessica Biel Jessica Chastain Jessica Henry Jessica Lange Jessica Simpson Jessica Ussery Jessie J Jill Zarin Jimmy Kimmel Jim Parsons Jim Toth Jionni LaValle Joan Rivers Joe Giudice Joel Edgerton Joel Madden Joe Manganiello Joe Simpson John Mayer Johnny Depp John Wood Jonathan Keith Jon Gosselin Jonny Drubel Jon Taffer Jordan Lloyd Jo Rivera Joseline Hernandez Joseph Gordon-Levitt Josh McKee Josie Leisz Joyce Giraud Justin Bieber Justin Lane Justin Theroux Justin Timberlake Justin Verlander Kai Hibbard Kail Lowry Kaitlynn Carter Kaley Cuoco Kandi Burruss Kanye West Karina Kennedy Karrueche Tran Kasey Dexter Kate Gosselin Kate Middleton Kate Stoltz Kate Upton Kathy Griffin Katie Holmes Katy Perry Keaton Stromberg Kelley Andrews Kelly Bensimon Kelly Cutrone Kelly Osbourne Kelly Ripa Kendall Jenner Kendra Wilkinson Kenya Moore Khloe Kardashian Kiefer Sutherland Kiki Malone Kimberly Birch Kim Kardashian Kim Richards Kim Zolciak Kit Harington Kordell Stewart Kourtney Kardashian Kris Humphries Kris Jenner Krista Keller Kristen Bell Kristen Stewart Kristen Taekman Kristina Anderson Kristin Cavallari Kylie Jenner Lady Gaga Lamar Odom Lamar Sally Lara Stone L.A. Reid Laura Prepon Lauren Conrad Lauren Pesce Lauryn Shannon Laverne Cox Leah Jenner Leah Messer Leah Thomas LeAnn Rimes Leonardo DiCaprio Liam Hemsworth Liam Payne Lilit Avagyan Lilly Ghalichi Lily Collins Lindsay Lohan Linsey Berardi Lionel Richie Lisa Rinna Louis Tomlinson Lucy Hale Lupita Nyong’o Lydia McLaughlin Lynne Curtin Maksim Chmerkovskiy Mandy Winnell Marc Anthony Margot Robbie Mariah Carey Mario Lopez Mario Singer Mark McDaniel Mark Salling Marlo Hampton Mathew Knowles Matt Baier Matthew Hicks Matt LeBlanc Max Joseph Mayim Bialik McKayla Maroney Megan Fox Mehgan James Melanie Blatt Melissa Rivers Mendeecees Harris Meredith Vieira Mia Goth Michael Abraham Michael Bublé Michael Padula Michael Sam Michael Strahan Michelle Rodriguez MIchelle Williams Mike Thompson Mike Sorrentino Mike Artiaga Mike Comrie Mila Kunis Miley Cyrus Mimi Faust Mindy Kaling Miranda Simms Moises Arias Monica Haas Morgan Stewart Natalia Kills Nathan Griffith Naya Rivera Nelsan Ellis NeNe Leakes Nev Schulman Niall Horan Nicholas Brendon Nicholas Hoult Nick Cannon Nick Cassavetes Nicki Minaj Nick Lachey Nick Loeb Nick Young Nicole Murphy Nicole Richie Nicole Scherzinger Nikki Ferrell Nikki Reed Nina Dobrev O.J. Simpson Olivia Wilde Olivier Martinez Orlando Scandrick Owen Wilson Ozzy Osbourne Paris Hilton Patrick Schwarzenegger Patti Stanger Patti Wilkinson Paula Patton Paul DelVecchio Paul McCartney Peaches Geldof Perrie Edwards Peter Thomas Phaedra Parks Pharrell Williams Porsha Williams Prince William R. Kelly Rachel Frederickson Rachel McAdams Rachel Roy Ramona Singer Raquel Curtin Reese Witherspoon Reggie Bush Reggie Youngblood Riley Keough Rita Ora Rita Wilson Robbie Kidd Robert Kardashian Robert Pattinson Robin Thicke Robin Williams Rob Kardashian Roger Mathews Ronda Kamihira Ronnie Ortiz-Magro Rose Copeland Rosie Perez Roxie Sowlaty Roxy Sowlaty Russell Simmons Ryan Dorsey Ryan Edwards Ryan Gosling Ryan Guzman Ryan Reynolds Ryan Seacrest Ryan Sweeting Sammi Giancola Scott Disick Sean Penn Selena Gomez Selma Blair Seth Gilliam Seth Rogen Shalana Hunter Shaniece Hairston Shannon Beador Sharon Osbourne Shaunie O’Neal Sheree Buchanan Sherri Shepherd Shia LaBeouf Shonda Rhimes Sienna Miller Simon Saran Sofia Vergara Sofie Vissa Sonja Morgan Sophie Hunter Spencer Pratt Stephanie Rogness-Fischer Stephen Fry Stevie J Sundy Carter Taliah Artiaga Tallulah Willis Tameka Harris Tami Roman Tammy Rivera Tamra Barney Tanisha Thomas Tara Reid Tasha McCauley Taylor Kinney Taylor McKinney Taylor Swift Teresa Davis Teresa Giudice Terry Richardson Thomas Cohen Tia Mowry Tina Simpson Todd Waterman Tom Brady Tom Hanks Tom Hardy Tonye Cole Tori Spelling Travis Garland Travis Scott Tricia Davis Tristan Thompson Tyler Baltierra Tyler Posey Vanessa Lachey Vanessa Williams Vee Torres Victoria Justice Victoria Siegel Wendy Williams Wentworth Miller Wesley Stromberg Whitney Port Willow Smith Will Smith Willy Moon Wiz Khalifa Wladimir Klitschko Zac Efron Zayn Malik Robert Pattinson Sylvester Stallone Kris Humphries Chace Crawford Kanye West Mel Gibson Nicolas Cage Cara Delevingne Serena Williams Lamar Odom Eva Longoria Stacey Dash Antonio Banderas Sean Connery Megan Fox Sean Combs David Letterman Nicole Richie Justin Timberlake Kim Kardashian Jeff Gordon Michael Jordan Mark Wahlberg Dwayne Wade Gemma Arterton Paris Hilton Kate Winslet Liam Neeson Vincent D'Onofrio Peter Billingsley Sean Penn Anna Gunn Adam Sandler Tom Hanks Dwight Howard Hugh Jackman Jessica Biel Simon Cowell Jake Gyllenhaal Tina Fey Cameron Diaz Emily Mortimer Jason London Stephanie Meyer Golshifteh Farahani Toby Keith Ed Westwick Charles Chaplin Reese Witherspoon Bruce Springsteen Vanessa Hudgens Daniel Radcliffe Bill Cosby Kenny Chesney Teri Hatcher Jay Leno Steve Carell Ariana Grande Courteney Cox Chris Brown Zooey Deschanel Jeff Goldblum Halle Berry Russell Crowe Miranda Kerr Owen Wilson Ethan Hawke Neil Diamond Sarah Shahi Jessica Chastain Angelina Jolie Ben Affleck Patricia Arquette Macaulay Culkin Jason Statham Phil McGraw Larry David 50 Cent Ian McKellen Ryan Reynolds Bradley Cooper Jane Fonda Tobey Maguire Justin Bieber Gabriel Macht Kobe Bryant Jon Stewart Brad Pitt Lady Gaga Kamal Hassan Charlie Sheen Rachael Ray Richard Gere Robin Thicke Maria Sharapova Nick Carter Mary-Louise Parker Ron Jeremy Phil Mickelson Sydney Liebes Steven Spielberg Julia Roberts Amitabh Bachchan Khloe Kardashian James Cameron Christian Bale Dustin Hoffman Ashley Tisdale Christopher Nolan Bruce Lee Daniel Craig Sofia Vergara Barbra Streisand Jerry Seinfeld Brad Paisley Bob Hope Jim Parsons Zac Efron Jude Law Kris Jenner Martin Sheen Lea Michele Shia LaBeouf Nicole Kidman Danny Trejo Miley Cyrus Mark Burnett Liam Hemsworth Lindsay Lohan Liv Tyler Amanda Bynes Roman Coppola Will Smith Ryan Seacrest Ian Somerhalder Laura Whitmore George Shelley Stephen Hawking Glenn Beck Famke Janssen Ashton Kutcher Oprah Winfrey Cory Monteith Katharine Hepburn Maksim Vitorgan Robin Williams Channing Tatum Rachel Zoe Jeff Bridges Katherine Heigl Rush Limbaugh Catherine Zeta-Jones Tom Cruise Alec Baldwin Harry Styles Matt Damon Peter Jackson Victoria Beckham Franco Nero Jet Li Drew Barrymore George Lucas John Malkovich Jason Bateman Robert Redford Bruce Willis Bob Marley Seth Rogen Carrie Underwood Morgan Freeman Jeff Dunham Denzel Washington Kathleen Turner Vin Diesel Michael Douglas Matthew McConaughey Hulk Hogan Natalya Rudakova Jason Biggs Adriana Lima Justin Theroux Wesley Snipes Taylor Swift Jeremy Renner Jack Black Dave Matthews Natalie Portman Alex Rodriguez Edward Norton William Shatner Bethenny Frankel Clint Eastwood Lil Wayne David Beckham Marilyn Monroe Britney Spears Julia Louis-Dreyfus Bob Dylan Chris Hemsworth David Copperfield George Pal George Clooney Howard Stern Kate Upton Emma Stone Rowan Atkinson Sienna Miller Leona Lewis Jennifer Garner Ellen DeGeneres Jackie Chan Tim McGraw Harrison Ford Elton John Scott Disick Al Pacino Freddie Mercury Emma Watson Emeril Lagasse Tom Hiddleston Kourtney Kardashian Rita Ora Charlie Hunnam Kelly Lynch Jason Schwartzman Mark Harmon Nina Dobrev Ashley Judd Bella Thorne Paul Rudd Brendan Fraser Mila Kunis Derek Jeter Derek Hough Chuck Lorre Tiger Woods Vanilla Ice Jennifer Lawrence Audrey Hepburn Bill Murray Lucas Black Jennifer Lopez Aamir Khan Sandra Bullock Eddie Murphy Beyonce Knowles Will Ferrell Paul Newman John Travolta Kate Moss Ron Howard Viola Davis Jim Carrey Leonardo DiCaprio James Caviezel Queen Latifah Tom Hardy Christina Aguilera Pierce Brosnan Jaden Smith Wolfgang Puck Jeananne Goossen Dwayne Johnson Roger Moore Coco Chanel Julianne Hough Zach Galifianakis Selena Gomez Jessica Alba Amanda Seyfried Danica Patrick Mickey Rourke Elvis Presley Kristen Bell LeBron James Claire Danes Hugh Laurie Chris Rock Zayn Malik Paul McCartney Ben Stiller Meryl Streep Keith Richards Heidi Klum Keira Knightley Naomi Watts James Dean Ray Romano Donald Trump Sigourney Weaver Marisa Tomei Demi Lovato Jack Nicholson Perrie Edwards Johnny Depp Nathan Sykes Tyler Perry Kevin Garnett Orlando Bloom Bruce Jenner Keanu Reeves Anne Hathaway Kristen Stewart Emma Thompson Alexa Chung Jennifer Aniston Scarlett Johansson Katy Perry Skylar Astin Arnold Schwarzenegger Vince Vaughn Christopher Waltz"

let userInput;

// array with the celebrities
var array = []

for (i=0; i<celebrities.split(' ').length; i++) {
    var name = celebrities.split(' ')[i] + " " + celebrities.split(' ')[i+1]
    //console.log('name = ' + name)
    array.push(name)
    i++
}
// thanks to this site for making this function
// https://www.w3resource.com/javascript-exercises/javascript-array-exercise-20.php
function find_duplicate_in_array(arra1) {
    var i,
    len=arra1.length,
    result = [],
    obj = {}; 
    for (i=0; i<len; i++) {
        obj[arra1[i]]=0;
    }
    for (i in obj) {
        result.push(i);
    }
    return result;
}

var array = find_duplicate_in_array(array)
console.log('ARRAY: ' + array)
function setup() {
    array.forEach(function(element) {
        //console.log('ARRAY')
        loadJSON(searchUrl + element, function(data) {
            let title = data[1][0]
            title = title.replace(/\s+/g, '_')
            //console.log(title)
            loadJSON(contentUrl + title, function(data) {
            let page = data.query.pages
            let pageId = Object.keys(page)[0]
            let content = page[pageId].revisions[0]['*']
            //console.log('CONTENT = ' + content)
                if (content.has('Early life or Early life _and family or Life _and career or Early life _and education')) {
                    console.log('There is an Early Life section ' + pageId + ' ' + title)
                    var early_life = content.substring(content.indexOf('==Early life==') + 14, content.indexOf('==Career=='))
                    //console.log('Early Life = ' + early_life)
                    if (early_life.has('divorce or divorced or separation')) {
                        console.log('parents divorced ' + title)
                        if (content.has('Personal life')) {
                            //console.log('There is an Personal Life section ' + pageId + ' ' + title)
                            var personal_life = content.substring(content.indexOf('==Personal life==') + 17)
                            //console.log('Personal life of ' + title + '\n\n' + personal_life)
                            if (personal_life.has('divorce or divorced or separation')) {
                                console.log('celebrity also divorced ' + title)
                            } 
                        }
                    } else {
                        if (content.has('Personal life')) {
                            //console.log('There is an Personal Life section ' + pageId + ' ' + title)
                            var personal_life = content.substring(content.indexOf('==Personal life==') + 17)
                            //console.log('Personal life of ' + title + '\n\n' + personal_life)
                            if (personal_life.has('divorce or divorced or separation')) {
                                console.log('celebrity divorced ' + title)
                            } 
                        }
                    }
                } else {
                    console.log('couldnt access the page ' + title)
                }
            }, 'jsonp')
        }, 'jsonp')
    })
}